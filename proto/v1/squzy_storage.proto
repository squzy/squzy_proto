syntax = 'proto3';

package squzy.v1.storage;

import "google/protobuf/timestamp.proto";
import "google/protobuf/struct.proto";
import "proto/v1/squzy_monitoring.proto";
import "proto/v1/squzy_agent_server.proto";
import "proto/v1/shared.proto";

service Storage {
    rpc SendResponseFromScheduler (SchedulerResponse) returns (squzy.v1.shared.Empty);
    rpc SendResponseFromAgent(squzy.v1.agent.SendMetricsRequest) returns (squzy.v1.shared.Empty);
}

message SchedulerResponse {
    enum Code {
        OK = 0;
        Error = 1;
    }
    message Error {
        string message = 1;
    }
    message MetaData {
        google.protobuf.Timestamp startTime = 1;
        google.protobuf.Timestamp endTime = 2;
        google.protobuf.Value value = 3;
    }
    string schedulerId = 1;
    Code code = 2;
    squzy.v1.monitoring.Type type = 3;
    Error error = 4;
    MetaData meta = 5;
}